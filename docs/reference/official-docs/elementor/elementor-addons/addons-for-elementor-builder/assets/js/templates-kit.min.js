jQuery(document).ready(function(e){let t={required_plugins:!1,required_theme:!0,events:function(){e(document).off("click",".afeb-template-kit-section .afeb-template-kit-import-btn").on("click",".afeb-template-kit-section .afeb-template-kit-import-btn",function(){let t=e(this).closest(".afeb-template-kit-section"),a=t.find(".afeb-box-header>img"),s=t.find(".afeb-box-body>.afeb-element-search-text"),i=e("#afeb-template-import-dialog"),o=e(".afeb-body");i.find(".afeb-template-import, .afeb-template-import-successful").hide(),e(".afeb-template-import-image").attr("src",a.attr("src")),i.find(".afeb-template-import-name").text(s.text()),i.find(".afeb-template-import-confirmation").attr("style","display:flex !important"),o.hasClass("ui-dialog-show")||e(".afeb-body").addClass("ui-dialog-show"),e("#afeb-template-import-dialog").parent().find(".ui-dialog-titlebar-close").hide(),setTimeout(function(){e("#afeb-template-import-dialog").dialog("open")},100)}),e(document).off("click",".afeb-template-kit-cancel-btn").on("click",".afeb-template-kit-cancel-btn",function(){e("#afeb-template-import-dialog").dialog("close")}),e(document).off("click",".afeb-template-import-confirmation .afeb-template-kit-import-btn").on("click",".afeb-template-import-confirmation .afeb-template-kit-import-btn",function(){t.import_templates_kit("nonprofit-organization-v1")}),e(document).off("click",".afeb-template-import-progress-markers .afeb-refresh").on("click",".afeb-template-import-progress-markers .afeb-refresh",function(){let a=e(this).attr("class"),s="nonprofit-organization-v1";if(-1!==a.indexOf("markers-plugins")){let i=e(".afeb-template-kit-section-"+s).data("plugins");t.progress("plugins"),t.ajax_request({action:"afeb_activate_required_plugins",plugins:i},function(e){void 0!==e.success&&!0==e.success?(t.progress("settings"),t.ajax_request({action:"afeb_import_settings",afeb_templates_kit:s},function(e){void 0!==e.success&&!0==e.success?(t.progress("content"),t.ajax_request({action:"afeb_import_templates_kit",afeb_templates_kit:s,afeb_templates_kit_single:!1},function(e){void 0!==e.success&&!0==e.success?setTimeout(function(){t.progress("finish")},1e3):void 0!==e.data&&void 0!==e.data.message&&t.failed("content",e.data.message)})):void 0!==e.data&&void 0!==e.data.message&&t.failed("settings",e.data.message)})):void 0!==e.data&&void 0!==e.data.message&&t.failed("plugins",e.data.message)})}else -1!==a.indexOf("markers-settings")?(t.progress("settings"),t.ajax_request({action:"afeb_import_settings",afeb_templates_kit:s},function(e){void 0!==e.success&&!0==e.success?(t.progress("content"),t.ajax_request({action:"afeb_import_templates_kit",afeb_templates_kit:s,afeb_templates_kit_single:!1},function(e){void 0!==e.success&&!0==e.success?setTimeout(function(){t.progress("finish")},1e3):void 0!==e.data&&void 0!==e.data.message&&t.failed("content",e.data.message)})):void 0!==e.data&&void 0!==e.data.message&&t.failed("settings",e.data.message)})):-1!==a.indexOf("markers-content")&&(t.progress("content"),t.ajax_request({action:"afeb_import_templates_kit",afeb_templates_kit:s,afeb_templates_kit_single:!1},function(e){void 0!==e.success&&!0==e.success?setTimeout(function(){t.progress("finish")},1e3):void 0!==e.data&&void 0!==e.data.message&&t.failed("content",e.data.message)}))}),e(document).off("click",".afeb-template-kit-section .afeb-preview").on("click",".afeb-template-kit-section .afeb-preview",function(){let t=e(this).closest(".afeb-row"),a=e(this).closest(".afeb-element-section"),s=a.data("kit-id"),i=a.data("pages"),o=a.data("pages-title"),n=a.data("pages-meta"),f=a.data("image-url"),r=a.data("preview-text"),p=a.data("preview-url"),l=a.data("back-text"),m="";(i=""!==i?i.split(","):i).forEach(function(e,t){let a="";a="home"!=e?void 0===n[e]?p+"/"+e+"-"+s:p+"/"+n[e]:p,m+='<div class="afeb-element-search-section afeb-col-lg-4 '+(t>2?"afeb-mr-top-20":"")+'"><div class="afeb-box-section afeb-element-section afeb-template-kit-section"><div class="afeb-box-header"><span class="afeb-loader"><i class="fa fa-spin fa-spinner"></i></span><img src="'+f+e+'.webp"></div><div class="afeb-box-body"><h3 class="afeb-element-search-text">'+o[e]+'</h3><div class="afeb-template-kit-btns"><a class="afeb-template-kit-preview-btn" href="'+a+'" target="_blank">'+r+'<span class="fa fa-eye"></span></a></div></div></div></div>'}),""!==m&&(e(".afeb-elements-heading").fadeOut(80),t.fadeOut(80).next().html(m+'<div class="afeb-template-preview-kit-back-btn afeb-col-lg-12"><button class="afeb-box-btn afeb-primary-btn" type="button">'+l+"</button></div>").css("display","flex"))}),e(document).off("click",".afeb-template-preview-kit-back-btn").on("click",".afeb-template-preview-kit-back-btn",function(){e(".afeb-elements-heading").fadeIn(100),e(".afeb-template-preview-kit-section").html("").hide(),e(".afeb-template-kit-section-row").css("display","flex")})},init:function(){t.events()},import_templates_kit:function(a){let s=e(".afeb-template-kit-section-"+a).data("plugins");t.progress("plugins"),t.ajax_request({action:"afeb_activate_required_plugins",plugins:s},function(e){void 0!==e.success&&!0==e.success?(t.progress("settings"),t.ajax_request({action:"afeb_import_settings",afeb_templates_kit:a},function(e){void 0!==e.success&&!0==e.success?(t.progress("content"),t.ajax_request({action:"afeb_import_templates_kit",afeb_templates_kit:a,afeb_templates_kit_single:!1},function(e){void 0!==e.success&&!0==e.success?setTimeout(function(){t.progress("finish")},1e3):void 0!==e.data&&void 0!==e.data.message&&t.failed("content",e.data.message)})):void 0!==e.data&&void 0!==e.data.message&&t.failed("settings",e.data.message)})):void 0!==e.data&&void 0!==e.data.message&&t.failed("plugins",e.data.message)})},ajax_request:function(t,a,s){e.ajax({type:"POST",async:!0,timeout:36e5,url:AFEB.ajax_url,data:Object.assign(t,{nonce:AFEB.nonce}),success:function(e){a(e)},error:function(e){s(e)}})},progress:function(t){let a=e("#afeb-template-import-dialog"),s=e('div[aria-describedby="afeb-template-import-dialog"]'),i=a.find(".afeb-template-import-please-wait"),o=a.find(".afeb-template-import-heading"),n=a.find(".afeb-template-import-description"),f=a.find(".afeb-template-import-tip"),r=a.find(".afeb-template-import-status"),p=r.data("status");e("#afeb-template-import-dialog").parent().find(".ui-dialog-titlebar-close").hide(),i.text(i.data("message")),o.text(o.data("message")),n.text(n.data("message")),f.text(f.data("message")),"plugins"==t?(e(".afeb-template-import-progress").animate({width:"24%"},500),e(".afeb-template-import-progress-markers-plugins").removeClass("afeb-refresh").find(">div>span").attr("class","fa fa-hourglass-start fa-spin"),r.text(p.plugins+" ..."),a.find(".afeb-template-import-confirmation,.afeb-template-import-successful").fadeOut(100),setTimeout(function(){let e=s.css("top");s.css({top:parseInt(e)-60+"px"}),a.find(".afeb-template-import").attr("style","display:block !important")},105)):"settings"==t?(e(".afeb-template-import-progress-markers-plugins>div>span").attr("class","fa fa-check"),e(".afeb-template-import-progress").animate({width:"49%"},500),setTimeout(function(){e(".afeb-template-import-progress-markers-settings").removeClass("afeb-refresh").find(">div>span").attr("class","fa fa-hourglass-start fa-spin"),r.text(p.settings+" ...")},800)):"content"==t?(e(".afeb-template-import-progress-markers-settings>div>span").attr("class","fa fa-check"),e(".afeb-template-import-progress").animate({width:"74%"},500),setTimeout(function(){e(".afeb-template-import-progress-markers-content").removeClass("afeb-refresh").find(">div>span").attr("class","fa fa-hourglass-start fa-spin"),r.text(p.content+" ...")},800)):"finish"==t&&(e(".afeb-template-import-progress").animate({width:"100%"},500),e(".afeb-template-import-progress-markers-content>div>span").attr("class","fa fa-check"),setTimeout(function(){a.find(".afeb-template-import-confirmation,.afeb-template-import").hide();let t=a.find(".afeb-template-import-successful"),i=a.find(".afeb-template-kit-import-btn"),o=s.css("top");s.css({top:parseInt(o)+40+"px"}),t.find(".afeb-template-import-successful-get-help").show(),i.text(i.data("text")),i.find(">span").attr("class","fa fa-eye"),e("#afeb-template-import-dialog").parent().find(".ui-dialog-titlebar-close").show(),a.find(".afeb-template-import-successful").attr("style","display:block !important"),e(".afeb-template-import-progress").css({width:"24%"})},1500))},failed:function(t,a){let s=e("#afeb-template-import-dialog"),i=s.find(".afeb-template-import-please-wait"),o=s.find(".afeb-template-import-heading"),n=s.find(".afeb-template-import-description"),f=s.find(".afeb-template-import-tip"),r=s.find(".afeb-template-import-progress-markers-"+t),p=s.find(".afeb-template-import-status");i.text(""),o.text(o.data("error-message")),n.text(n.data("error-message")),f.text(a),p.text(""),e("#afeb-template-import-dialog").parent().find(".ui-dialog-titlebar-close").show(),r.addClass("afeb-refresh").find(">div>span").attr("class","fa fa-retweet")}};t.init()});